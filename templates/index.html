<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>VHDS V3</title>

<style>
body{
background:#0b1020;
color:white;
font-family:sans-serif;
padding:20px;
}
input,select,button{
padding:8px;
margin:5px;
}
#photoPreview img{
width:80px;
margin:5px;
border-radius:8px;
}
button{
background:#22c55e;
color:white;
border:none;
cursor:pointer;
}
</style>

</head>

<body>

<h2>VHDS V3 分析</h2>

<form method="POST" action="/analyze" enctype="multipart/form-data">

年齡:
<input name="age" id="age"><br>

身高:
<input name="height" id="height"><br>

體重:
<input name="weight" id="weight"><br>

腰圍:
<input name="waist" id="waist"><br>

模式:
<select name="mode" id="mode">
<option value="health">健康</option>
<option value="skin">肌膚</option>
<option value="face">面相</option>
<option value="psy">心理</option>
</select>

<br><br>

上傳照片:
<input type="file" name="photo" id="photos" multiple>

<div id="photoPreview"></div>

<br>

<button type="submit">開始分析</button>

</form>

<hr>

{% if result %}

<h3>總分: {{result.overall}}</h3>

<canvas id="radarCanvas" width="400" height="400"></canvas>

{% for item in result.items %}

<div>
{{item.name}} : {{item.score}}
</div>

{% endfor %}

{% endif %}

<script>

document.getElementById("photos").addEventListener("change",function(e){

const preview=document.getElementById("photoPreview");

preview.innerHTML="";

for(const file of e.target.files){

const img=document.createElement("img");

img.src=URL.createObjectURL(file);

preview.appendChild(img);

}

});

</script>

<script src="{{ url_for('static', filename='radar.js') }}"></script>

<script>

{% if result %}

const items = {{result.items | tojson}};

if(window.VHDSRadar){
VHDSRadar.start("radarCanvas", items);
}

{% endif %}

</script>

</body>
</html>
